import{m as V,q as c,E as m,n as y,_ as k}from"#entry";import{u as N}from"./CAK6LHbS.js";import{l as h,d as v,r as E,M as q,O as o,aG as B,a2 as r,X as l,at as n,N as C,u as f,$ as O}from"./CNHhKriD.js";import"./Ck70_2Af.js";const T={class:"login-container"},U={class:"login-panel"},F={class:"panel-right"},M=h({__name:"register",setup(P){const p=v(),a=E({username:"",password:"",confirm:""}),_={username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(i,e,s)=>{e!==a.password?s(new Error("两次密码不一致")):s()},trigger:"blur"}]},d=v(!1),g=async()=>{p.value?.validate(async i=>{if(i){d.value=!0;try{const{error:e}=await N("/api/auth/register",{method:"POST",server:!1,body:{username:a.username,password:a.password}},"$FxXnWOHBbD");if(e.value)throw e.value;m.success("注册成功，已登录"),y("/")}catch{m.error("注册失败：用户名已存在或服务器错误")}finally{d.value=!1}}})};return(i,e)=>{const s=n("el-input"),u=n("el-form-item"),b=n("el-button"),w=n("el-form"),x=n("el-card");return C(),q("div",T,[o("div",U,[e[5]||(e[5]=B('<div class="panel-left" data-v-e57f021f><div class="brand" data-v-e57f021f><div class="brand-logo" data-v-e57f021f>Nuxt</div><div class="brand-title" data-v-e57f021f>企业后台管理系统</div><div class="brand-desc" data-v-e57f021f>欢迎注册新账户</div></div></div>',1)),o("div",F,[r(x,{class:"login-card",shadow:"never"},{default:l(()=>[e[4]||(e[4]=o("div",{class:"card-header"},[o("div",{class:"logo"},"EP"),o("div",{class:"title"},[o("h2",null,"用户注册"),o("p",null,"请输入账号与密码")])],-1)),r(w,{ref_key:"formRef",ref:p,model:a,rules:_,"label-position":"top"},{default:l(()=>[r(u,{label:"账号",prop:"username"},{default:l(()=>[r(s,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=t=>a.username=t),placeholder:"请输入账号","prefix-icon":f(V),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(u,{label:"密码",prop:"password"},{default:l(()=>[r(s,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=t=>a.password=t),type:"password",placeholder:"请输入密码","prefix-icon":f(c),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(u,{label:"确认密码",prop:"confirm"},{default:l(()=>[r(s,{modelValue:a.confirm,"onUpdate:modelValue":e[2]||(e[2]=t=>a.confirm=t),type:"password",placeholder:"请再次输入密码","prefix-icon":f(c),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(b,{class:"submit-btn",type:"primary",size:"large",loading:d.value,onClick:g,block:""},{default:l(()=>[...e[3]||(e[3]=[O(" 注册并登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})])])])}}}),z=k(M,[["__scopeId","data-v-e57f021f"]]);export{z as default};
